/*
 * OverlappingMarkerSpiderfier: 
 * https://github.com/jawj/OverlappingMarkerSpiderfier
 *
 * Copyright (c) 2011 George MacKerron
 * Released under the MIT licence: http://opensource.org/licenses/mit-license
 */
(function(){var l=null;
(function(){function n(a,b){return function(){return a.apply(b,arguments)}}var h,i,j,k,m,o=Array.prototype.slice;i=google.maps;m=Math.PI*2;h=function(){function a(b){var c,f,d;this.map=b;this.l=new this.constructor.e(this.map);this.g=[];this.i={};d=["click","zoom_changed","maptypeid_changed"];c=0;for(f=d.length;c<f;c++)b=d[c],i.event.addListener(this.map,b,n(function(){return this.p()},this))}a.prototype.H=20;a.prototype.t=23;a.prototype.v=m/12;a.prototype.O=26;a.prototype.Q=11;a.prototype.P=4;a.prototype.u=
9;a.prototype.r=10;a.prototype.M=1E4;a.prototype.q=9;a.prototype.A=9999;a.prototype.C=1.5;a.prototype.d={b:{},c:{}};a.prototype.addListener=function(b,c){var f,d;((d=(f=this.i)[b])!=l?d:f[b]=[]).push(c);return this};a.prototype.trigger=function(){var e;var b,c,f,d,g;c=arguments[0];b=2<=arguments.length?o.call(arguments,1):[];e=(f=this.i[c])!=l?f:[],c=e;d=0;for(g=c.length;d<g;d++)f=c[d],f.apply(l,b);return this};a.prototype.s=function(b){i.event.addListener(b,"click",n(function(){return this.L(b)},
this));b.setZIndex(this.r);this.g.push(b);return this};a.prototype.I=function(b,c){var f,d,g,e,a,i,h,j;e=[];a=c*c;g=this.j(b.position);j=this.g;i=0;for(h=j.length;i<h;i++)f=j[i],d=this.j(f.position),this.m(d,g)<a&&e.push({F:f,k:d});return e};a.prototype.w=function(b,c){var f,d,g,e,a;e=this.t*(2+b)/m;d=m/b;a=[];for(g=0;0<=b?g<b:g>b;0<=b?g++:g--)f=this.v+g*d,a.push(new i.Point(c.x+e*Math.cos(f),c.y+e*Math.sin(f)));return a};a.prototype.z=function(b,c){var f,d,a,e,h;a=this.Q;f=0;h=[];for(d=0;0<=b?d<
b:d>b;0<=b?d++:d--)f+=this.O/a+d*5.0E-4,e=new i.Point(c.x+a*Math.cos(f),c.y+a*Math.sin(f)),a+=m*this.P/f,h.push(e);return h};a.prototype.L=function(b){var c;c=b.a!=l;this.p();return c?this.trigger("click",b):(c=this.I(b,this.H),c.length===1?this.trigger("click",b):this.N(c))};a.prototype.D=function(b){return{h:n(function(){return b.a.f.setOptions({strokeColor:this.d.c[this.map.mapTypeId],zIndex:this.A})},this),o:n(function(){return b.a.f.setOptions({strokeColor:this.d.b[this.map.mapTypeId],zIndex:this.q})},
this)}};a.prototype.N=function(b){var c,a,d,g,e,h,j,k,m;this.n=!0;d=b.length;c=this.J(function(){var c,a,d;d=[];c=0;for(a=b.length;c<a;c++)h=b[c],d.push(h.k);return d}());d=d>=this.u?this.z(d,c).reverse():this.w(d,c);j=[];k=0;for(m=d.length;k<m;k++){a=d[k];c=this.K(a);e=this.G(b,n(function(b){return this.m(b.k,a)},this));e=e.F;g=new i.Polyline({map:this.map,path:[e.position,c],strokeColor:this.d.b[this.map.mapTypeId],strokeWeight:this.C,zIndex:this.q});e.a={R:e.position,f:g};if(this.d.c[this.map.mapTypeId]!==
this.d.b[this.map.mapTypeId])g=this.D(e),i.event.addListener(e,"mouseover",g.h),i.event.addListener(e,"mouseout",g.o),e.a.B=g;e.setZIndex(this.M+a.y);e.setPosition(c);j.push(e)}return this.trigger("spiderfy",j)};a.prototype.p=function(){var b,c,a,d,g,e;if(this.n!=l){delete this.n;a=[];e=this.g;d=0;for(g=e.length;d<g;d++)if(c=e[d],c.a!=l)c.a.f.setMap(l),c.setZIndex(this.r),c.setPosition(c.a.R),b=c.a.B,b!=l&&(i.event.clearListeners(c,"mouseover",b.h),i.event.clearListeners(c,"mouseout",b.o)),delete c.a,
a.push(c);return this.trigger("unspiderfy",a)}};a.prototype.m=function(b,c){var a,d;a=b.x-c.x;d=b.y-c.y;return a*a+d*d};a.prototype.J=function(b){var a,f,d,g,e;g=f=d=0;for(e=b.length;g<e;g++)a=b[g],f+=a.x,d+=a.y;b=b.length;return new i.Point(f/b,d/b)};a.prototype.j=function(b){return this.l.getProjection().fromLatLngToDivPixel(b)};a.prototype.K=function(b){return this.l.getProjection().fromDivPixelToLatLng(b)};a.prototype.G=function(b,a){var f,d,g,e,h;g=0;for(h=b.length;g<h;g++)if(e=b[g],e=a(e),!(typeof f!==
"undefined"&&f!==l)||e<d)d=e,f=g;return b.splice(f,1)[0]};return a}();h.e=function(a){return this.setMap(a)};h.e.prototype=new i.OverlayView;h.e.prototype.draw=function(){};k=i.MapTypeId;j=h.prototype.d;j.b[k.HYBRID]=j.b[k.SATELLITE]="#fff";j.c[k.HYBRID]=j.c[k.SATELLITE]="#f00";j.b[k.TERRAIN]=j.b[k.ROADMAP]="#444";j.c[k.TERRAIN]=j.c[k.ROADMAP]="#f00";this.OverlappingMarkerSpiderfier=h;h=h.prototype;h.addMarker=h.s;h.addListener=h.addListener}).call(this);}).call(this);
