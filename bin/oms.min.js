(function(){/*
 OverlappingMarkerSpiderfier
 https://github.com/jawj/OverlappingMarkerSpiderfier
 Copyright (c) 2011 George MacKerron
 Released under the MIT licence: http://opensource.org/licenses/mit-license 
*/
var k=null;
(function(){function n(i,h){return function(){return i.apply(h,arguments)}}var p=Array.prototype.slice;this.OverlappingMarkerSpiderfier=function(){function i(a){var c,e,d;this.map=a;this.k=new this.constructor.c(this.map);this.i=[];this.b=[];this.g={};d=["click","zoom_changed","maptypeid_changed"];c=0;for(e=d.length;c<e;c++)a=d[c],h.event.addListener(this.map,a,n(function(){return this.e()},this))}var h,l,m,j,b,o;b=i.prototype;b.VERSION="0.1.2";h=google.maps;j=h.MapTypeId;o=Math.PI*2;b.nearbyDistance=20;
b.circleSpiralSwitchover=9;b.circleFootSeparation=23;b.circleStartAngle=o/12;b.spiralFootSeparation=26;b.spiralLengthStart=11;b.spiralLengthFactor=4;b.spiderfiedZIndex=1E3;b.usualLegZIndex=10;b.highlightedLegZIndex=20;b.legWeight=1.5;b.legColors={usual:{},highlighted:{}};m=b.legColors.usual;l=b.legColors.highlighted;m[j.HYBRID]=m[j.SATELLITE]="#fff";l[j.HYBRID]=l[j.SATELLITE]="#f00";m[j.TERRAIN]=m[j.ROADMAP]="#444";l[j.TERRAIN]=l[j.ROADMAP]="#f00";b.addMarker=function(a){this.i.push(h.event.addListener(a,
"click",n(function(){return this.A(a)},this)));this.b.push(a);return this};b.removeMarker=function(a){var c;this.e();a=this.o(this.b,a);if(!(a<0))return c=this.i.splice(a,1)[0],h.event.removeListener(c),this.b.splice(a,1),this};b.addListener=function(a,c){var e,d;((d=(e=this.g)[a])!=k?d:e[a]=[]).push(c);return this};b.trigger=function(){var q;var a,c,e,d,g,f;c=arguments[0];a=2<=arguments.length?p.call(arguments,1):[];q=(e=this.g[c])!=k?e:[],c=q;f=[];d=0;for(g=c.length;d<g;d++)e=c[d],f.push(e.apply(k,
a));return f};b.v=function(a,c){var e,d,g,f,b,h,j,i;f=[];b=c*c;g=this.h(a.position);i=this.b;h=0;for(j=i.length;h<j;h++)e=i[h],d=this.h(e.position),this.l(d,g)<b&&f.push({t:e,j:d});return f};b.p=function(a,c){var e,d,g,f,b;f=this.circleFootSeparation*(2+a)/o;d=o/a;b=[];for(g=0;0<=a?g<a:g>a;0<=a?g++:g--)e=this.circleStartAngle+g*d,b.push(new h.Point(c.x+f*Math.cos(e),c.y+f*Math.sin(e)));return b};b.q=function(a,c){var e,d,g,f,b;g=this.spiralLengthStart;e=0;b=[];for(d=0;0<=a?d<a:d>a;0<=a?d++:d--)e+=
this.spiralFootSeparation/g+d*5.0E-4,f=new h.Point(c.x+g*Math.cos(e),c.y+g*Math.sin(e)),g+=o*this.spiralLengthFactor/e,b.push(f);return b};b.A=function(a){var c;c=a.a!=k;this.e();return c?this.trigger("click",a):(c=this.v(a,this.nearbyDistance),c.length===1?this.trigger("click",a):this.B(c))};b.s=function(a){return{f:n(function(){return a.a.d.setOptions({strokeColor:this.legColors.highlighted[this.map.mapTypeId],zIndex:this.highlightedLegZIndex})},this),n:n(function(){return a.a.d.setOptions({strokeColor:this.legColors.usual[this.map.mapTypeId],
zIndex:this.usualLegZIndex})},this)}};b.B=function(a){var c,e,d,b,f,j,i,l,m;this.m=!0;d=a.length;c=this.w(function(){var c,e,d;d=[];c=0;for(e=a.length;c<e;c++)j=a[c],d.push(j.j);return d}());d=d>=this.circleSpiralSwitchover?this.q(d,c).reverse():this.p(d,c);i=[];l=0;for(m=d.length;l<m;l++){e=d[l];c=this.z(e);f=this.u(a,n(function(a){return this.l(a.j,e)},this));f=f.t;b=new h.Polyline({map:this.map,path:[f.position,c],strokeColor:this.legColors.usual[this.map.mapTypeId],strokeWeight:this.legWeight,
zIndex:this.usualLegZIndex});f.a={C:f.position,d:b};if(this.legColors.highlighted[this.map.mapTypeId]!==this.legColors.usual[this.map.mapTypeId])b=this.s(f),h.event.addListener(f,"mouseover",b.f),h.event.addListener(f,"mouseout",b.n),f.a.r=b;f.setPosition(c);f.setZIndex(Math.round(this.spiderfiedZIndex+e.y));i.push(f)}return this.trigger("spiderfy",i)};b.e=function(){var a,c,e,d,b,f;if(this.m!=k){delete this.m;e=[];f=this.b;d=0;for(b=f.length;d<b;d++)if(c=f[d],c.a!=k)c.a.d.setMap(k),c.setPosition(c.a.C),
c.setZIndex(k),a=c.a.r,a!=k&&(h.event.clearListeners(c,"mouseover",a.f),h.event.clearListeners(c,"mouseout",a.n)),delete c.a,e.push(c);return this.trigger("unspiderfy",e)}};b.l=function(a,c){var e,d;e=a.x-c.x;d=a.y-c.y;return e*e+d*d};b.w=function(a){var c,e,d,b,f;b=e=d=0;for(f=a.length;b<f;b++)c=a[b],e+=c.x,d+=c.y;a=a.length;return new h.Point(e/a,d/a)};b.h=function(a){return this.k.getProjection().fromLatLngToDivPixel(a)};b.z=function(a){return this.k.getProjection().fromDivPixelToLatLng(a)};b.u=
function(a,c){var b,d,g,f,h;g=0;for(h=a.length;g<h;g++)if(f=a[g],f=c(f),!(typeof b!=="undefined"&&b!==k)||f<d)d=f,b=g;return a.splice(b,1)[0]};b.o=function(a,c){var b,d,g;if(a.indexOf!=k)return a.indexOf(c);b=0;for(g=a.length;b<g;b++)if(d=a[b],d===c)return b;return-1};i.c=function(a){return this.setMap(a)};i.c.prototype=new h.OverlayView;i.c.prototype.draw=function(){};return i}()}).call(this);}).call(this);
/* Fri 5 Aug 2011 11:12:53 BST */
